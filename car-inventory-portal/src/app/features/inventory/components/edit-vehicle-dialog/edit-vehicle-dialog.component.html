<h2 mat-dialog-title>Edit Vehicle</h2>
    <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()">
      <mat-dialog-content>

        <div class="image-upload-section">
          <div class="current-image" *ngIf="currentImage">
            <img [src]="currentImage" alt="Vehicle Image">
          </div>
          <div class="upload-controls">
            <input
              type="file"
              #fileInput
              accept="image/*"
              style="display: none"
              (change)="onFileSelected($event)">
            <button 
              mat-stroked-button 
              type="button" 
              (click)="fileInput.click()">
              <mat-icon>upload</mat-icon>
              {{ currentImage ? 'Change Image' : 'Upload Image' }}
            </button>
            <button 
              *ngIf="currentImage" 
              mat-icon-button 
              type="button" 
              color="warn"
              (click)="removeImage()">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>


        <mat-form-field appearance="outline">
          <mat-label>Make</mat-label>
          <input matInput formControlName="make">
          <mat-error *ngIf="vehicleForm.get('make')?.errors?.['required']">
            Make is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Model</mat-label>
          <input matInput formControlName="model">
          <mat-error *ngIf="vehicleForm.get('model')?.errors?.['required']">
            Model is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Year</mat-label>
          <input matInput type="number" formControlName="year">
          <mat-error *ngIf="vehicleForm.get('year')?.errors?.['required']">
            Year is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>VIN</mat-label>
          <input matInput formControlName="vin">
          <mat-error *ngIf="vehicleForm.get('vin')?.errors?.['required']">
            VIN is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Price</mat-label>
          <input matInput type="number" formControlName="price">
          <mat-error *ngIf="vehicleForm.get('price')?.errors?.['required']">
            Price is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status">
            <mat-option value="AVAILABLE">Available</mat-option>
            <mat-option value="PENDING">Pending</mat-option>
            <mat-option value="SOLD">Sold</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-dialog-content>

      <mat-dialog-actions align="end">
        <button mat-button type="button" mat-dialog-close>Cancel</button>
        <button mat-button color="primary" type="submit" [disabled]="!vehicleForm.valid">
          Save Changes
        </button>
      </mat-dialog-actions>
    </form>
