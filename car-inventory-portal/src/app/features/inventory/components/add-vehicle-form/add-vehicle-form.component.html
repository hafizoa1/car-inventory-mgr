<h2 mat-dialog-title>Add New Vehicle</h2>
<form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()">
  <mat-dialog-content>
    <!-- VIN Field -->
    <mat-form-field appearance="outline">
      <mat-label>VIN</mat-label>
      <input matInput formControlName="vin" required>
      <mat-error *ngIf="vehicleForm.get('vin')?.touched && vehicleForm.get('vin')?.errors">
        <span *ngIf="vehicleForm.get('vin')?.errors?.['required']">VIN is required</span>
        <span *ngIf="vehicleForm.get('vin')?.errors?.['serverError']">
          {{vehicleForm.get('vin')?.errors?.['serverError']}}
        </span>
      </mat-error>
    </mat-form-field>

    <!-- Make Field -->
    <mat-form-field appearance="outline">
      <mat-label>Make</mat-label>
      <input matInput formControlName="make" required>
      <mat-error *ngIf="vehicleForm.get('make')?.touched && vehicleForm.get('make')?.errors">
        <span *ngIf="vehicleForm.get('make')?.errors?.['required']">Make is required</span>
        <span *ngIf="vehicleForm.get('make')?.errors?.['serverError']">
          {{vehicleForm.get('make')?.errors?.['serverError']}}
        </span>
      </mat-error>
    </mat-form-field>

    <!-- Model Field -->
    <mat-form-field appearance="outline">
      <mat-label>Model</mat-label>
      <input matInput formControlName="model" required>
      <mat-error *ngIf="vehicleForm.get('model')?.touched && vehicleForm.get('model')?.errors">
        <span *ngIf="vehicleForm.get('model')?.errors?.['required']">Model is required</span>
        <span *ngIf="vehicleForm.get('model')?.errors?.['serverError']">
          {{vehicleForm.get('model')?.errors?.['serverError']}}
        </span>
      </mat-error>
    </mat-form-field>

    <!-- Year Field -->
    <mat-form-field appearance="outline">
      <mat-label>Year</mat-label>
      <input matInput type="number" formControlName="year" required min="1900">
      <mat-error *ngIf="vehicleForm.get('year')?.touched && vehicleForm.get('year')?.errors">
        <span *ngIf="vehicleForm.get('year')?.errors?.['required']">Year is required</span>
        <span *ngIf="vehicleForm.get('year')?.errors?.['min']">Year must be 1900 or later</span>
        <span *ngIf="vehicleForm.get('year')?.errors?.['serverError']">
          {{vehicleForm.get('year')?.errors?.['serverError']}}
        </span>
      </mat-error>
    </mat-form-field>

    <!-- Price Field -->
    <mat-form-field appearance="outline">
      <mat-label>Price</mat-label>
      <input matInput type="number" formControlName="price" required min="0">
      <span matPrefix>$&nbsp;</span>
      <mat-error *ngIf="vehicleForm.get('price')?.touched && vehicleForm.get('price')?.errors">
        <span *ngIf="vehicleForm.get('price')?.errors?.['required']">Price is required</span>
        <span *ngIf="vehicleForm.get('price')?.errors?.['min']">Price must be greater than 0</span>
        <span *ngIf="vehicleForm.get('price')?.errors?.['serverError']">
          {{vehicleForm.get('price')?.errors?.['serverError']}}
        </span>
      </mat-error>
    </mat-form-field>

    <!-- Status Field -->
    <mat-form-field appearance="outline">
      <mat-label>Status</mat-label>
      <mat-select formControlName="status" required>
        <mat-option value="AVAILABLE">Available</mat-option>
        <mat-option value="SOLD">Sold</mat-option>
        <mat-option value="PENDING">Pending</mat-option>
      </mat-select>
      <mat-error *ngIf="vehicleForm.get('status')?.touched && vehicleForm.get('status')?.errors">
        <span *ngIf="vehicleForm.get('status')?.errors?.['required']">Status is required</span>
        <span *ngIf="vehicleForm.get('status')?.errors?.['serverError']">
          {{vehicleForm.get('status')?.errors?.['serverError']}}
        </span>
      </mat-error>
    </mat-form-field>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-button type="button" mat-dialog-close>Cancel</button>
    <button 
      mat-raised-button 
      color="primary" 
      type="submit" 
      [disabled]="!vehicleForm.valid || isSubmitting">
      <mat-spinner diameter="20" *ngIf="isSubmitting"></mat-spinner>
      <span *ngIf="!isSubmitting">Add Vehicle</span>
    </button>
  </mat-dialog-actions>
</form>